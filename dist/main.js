!function(e){var t={};function o(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=t,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(r,a,function(t){return e[t]}.bind(null,a));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,o){"use strict";o.r(t);var r=class{constructor(e,t,o="",r=3,a="none",i=null){this.project=e,this.title=t,this.description=o,this.priority=r,this.dueDate=a,this.tags=i||[],this.completed=!1}addTag(e){this.tags.push(e)}removeTag(e){this.tags.includes(e)&&this.tags.splice(this.tags.indexOf(e),1)}toggleComplete(){this.completed=!this.completed}};var a=class{constructor(e,t="",o=[]){this.title=t,this.todos=o,this.ID=e}addToDo(e){this.todos.push(e)}deleteToDo(e){console.log(e),console.log(this.todos.includes(e)),this.todos.includes(e)&&this.todos.splice(this.todos.indexOf(e),1)}getToDo(e){for(let t=0;t<this.todos.length;t++)if(this.todos[t].title==e)return this.todos[t];return!1}updateToDo(e,t){e.title=t.title,e.description=t.description,e.priority=t.priority,e.dueDate=t.dueDate}};var i=class{constructor(){this.nextID=0,this.projects=[]}addProject(){var e=new a(this.nextID);return this.nextID+=1,this.projects.push(e),e}addSavedProject(e){this.projects.push(e)}removeProject(e){this.projects.includes(e)&&this.projects.splice(this.projects.indexOf(e),1)}getProjByID(e){let t=!1;return this.projects.forEach(o=>{o.ID==e&&(t=o)}),t}getIDByProj(e){return e.ID}addToDo(e,t){e.addToDo(t)}updateToDo(e,t,o){e.updateToDo(t,o)}};function c(e){if(window.localStorage.setItem("project-next-id",e.nextID),void 0!==e.projects&&e.projects.length>0){let t=[];for(let o=0;o<e.projects.length;o++){let r=e.projects[o],a=[];if(a.push(r.title),a.push(r.ID),null!=r.todos)for(let e=0;e<r.todos.length;e++){let t=r.todos[e],o=[];o.push(t.title),o.push(t.description),o.push(t.priority),o.push(t.dueDate),o.push(t.completed),a.push(o)}t.push(a)}console.log(t),window.localStorage.setItem("projects-array",JSON.stringify(t))}else window.localStorage.removeItem("projects-array")}var s=class{constructor(e){this.projectManager=e,this.projectsDiv=document.querySelector("#projects")}addProjectView(e,t=""){let o=this.createProjectCard(e);o.append(this.createProjectNameInput(e,t)),o.append(this.createProjectTrashIcon(e,o)),o.append(this.createAddItemButton(e)),this.projectsDiv.append(o)}createProjectCard(e){let t=document.createElement("div");return t.classList.add("project-card"),t.setAttribute("data-proj",this.projectManager.getIDByProj(e)),t}createProjectNameInput(e,t){let o=document.createElement("input");o.classList.add("project-name"),o.type="text",o.placeholder="Project name",""!=t&&(o.value=t);let r=this.projectManager;return o.addEventListener("input",(function(t){e.title=t.target.value,c(r)})),o}createProjectTrashIcon(e,t){let o=document.createElement("i");o.classList.add("fas"),o.classList.add("fa-trash-alt");let r=this.projectManager;return o.addEventListener("click",e=>{let t=e.target.parentElement,o=r.getProjByID(t.getAttribute("data-proj"));r.removeProject(o),this.projectsDiv.removeChild(t),c(r)}),o}createAddItemButton(e){let t=document.createElement("button");t.classList.add("add-new-item"),t.classList.add("form-elem"),t.textContent="+ Add new item";let o=this;return t.addEventListener("click",(function(){o.openToDoCreator(e)})),t}addTodoView(e,t){let o=this.projectManager.getIDByProj(e);document.querySelectorAll(".project-card").forEach(e=>{if(e.getAttribute("data-proj")==o){let o=e.lastChild,r=document.createElement("div");r.classList.add("todo-basic"),r.setAttribute("data-todo",t),this.addToDoLine(r,t),e.insertBefore(r,o)}})}openToDoCreator(e){let t=document.querySelector("#add-todo");t.style.display="block",t.setAttribute("data-proj",this.projectManager.getIDByProj(e)),document.querySelector("#background-cover").style.backgroundColor="rgba(0, 0, 0, .5)"}editToDo(e,t){console.log(e);let o=document.querySelector("#title"),r=document.querySelector("#date"),a=document.querySelector("#priority"),i=document.querySelector("#desc");document.querySelector("#form-title").textContent="Edit todo item",o.setAttribute("data-todo",e.title),o.value=e.title,r.value=e.dueDate,a.value=e.priority,i.value=e.description,this.openToDoCreator(t)}getPriority(e){switch(e){case 5:return"Highest";case 4:return"High";case 3:return"Medium";case 2:return"Low";case 1:return"Lowest";default:return"Medium"}}addToDoLine(e,t){let o=document.createElement("i");o.classList.add("far"),t.completed?o.classList.add("fa-check-circle"):o.classList.add("fa-circle");let r=this.projectManager;o.addEventListener("click",e=>{let o=e.currentTarget,a=e.currentTarget.nextElementSibling;o.classList.contains("fa-circle")?(o.classList.remove("fa-circle"),o.classList.add("fa-check-circle"),a.classList.add("checked"),a.classList.remove("unchecked"),t.toggleComplete()):(o.classList.remove("fa-check-circle"),o.classList.add("fa-circle"),a.classList.add("unchecked"),a.classList.remove("checked"),t.toggleComplete()),c(r)});let a=document.createElement("input");t.completed?a.classList.add("checked"):a.classList.add("unchecked"),a.classList.add("todo-title-input"),a.value=t.title;let i=document.createElement("p");i.classList.add("due-date"),i.textContent="Due date: "+t.dueDate;let s=document.createElement("p");s.classList.add("priority");let d=this.getPriority(parseInt(t.priority));s.textContent="Priority: "+d;let n=this.projectManager;a.addEventListener("input",(function(e){let o=e.target;t.title=o.value,c(n)}));let l=document.createElement("i");l.classList.add("far"),l.classList.add("fa-edit");let u=this;l.addEventListener("click",(function(e){u.editToDo(t,t.project)})),e.appendChild(o),e.appendChild(a),e.appendChild(i),e.appendChild(s),e.appendChild(l)}updateDisplay(){for(;this.projectsDiv.firstChild;)this.projectsDiv.removeChild(this.projectsDiv.firstChild);this.projectManager.projects.length>0&&this.projectManager.projects.forEach(e=>{this.addProjectView(e,e.title),e.todos.forEach(t=>{this.addTodoView(e,t)})})}};let d=function(){let e=new i;if(null!=window.localStorage.getItem("project-next-id")){e.nextID=parseInt(window.localStorage.getItem("project-next-id"));let t=JSON.parse(window.localStorage.getItem("projects-array"));if(console.log(t),null!=t)for(let o=0;o<t.length;o++){let i=t[o],c=new a(i[1],i[0]);if(i.length>=3)for(let e=2;e<i.length;e++){let t="None";"None"!=i[e][3]&&(t=new Date(i[e][3]).toLocaleDateString("en-US"));let o=new r(c,i[e][0],i[e][1],parseInt(i[e][2]),t);o.completed=1==i[e][4],c.addToDo(o)}e.addSavedProject(c)}}return e}();const n=new s(d);n.updateDisplay(),document.querySelector("#new-project-button").addEventListener("click",()=>{let e=d.addProject();n.addProjectView(e),c(d)}),document.querySelector("#add-to-do-button").addEventListener("click",()=>{let e=document.querySelector("#add-todo"),t=d.getProjByID(parseInt(e.getAttribute("data-proj"))),o=document.querySelector("#title"),a=document.querySelector("#date"),i=document.querySelector("#priority"),s=document.querySelector("#desc"),l=null;if(o.hasAttribute("data-todo")){let e=t.getToDo(o.getAttribute("data-todo"));l=new r(t,o.value,s.value,i.value,a.value?new Date(a.value).toLocaleDateString("en-US"):"None"),d.updateToDo(t,e,l),n.updateDisplay()}else l=new r(t,o.value,s.value,i.value,a.value?new Date(a.value).toLocaleDateString("en-US"):"None"),d.addToDo(t,l),n.updateDisplay();e.style.display="none",o.value="",a.value="",i.value="",s.value="",o.hasAttribute("data-todo")&&o.removeAttribute("data-todo"),document.querySelector("#background-cover").style.backgroundColor="rgba(0, 0, 0, 0)",document.querySelector("#form-title").textContent="Add a todo item",c(d)})}]);