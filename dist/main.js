!function(e){var t={};function o(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=t,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(r,a,function(t){return e[t]}.bind(null,a));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,o){"use strict";o.r(t);var r=class{constructor(e,t,o="",r=3,a="none",c=null){this.project=e,this.title=t,this.description=o,this.priority=r,this.dueDate=a,this.tags=c||[],this.completed=!1}addTag(e){this.tags.push(e)}removeTag(e){this.tags.includes(e)&&this.tags.splice(this.tags.indexOf(e),1)}toggleComplete(){this.completed=!this.completed}};var a=class{constructor(e,t="",o=[]){this.title=t,this.todos=o,this.ID=e}addToDo(e){this.todos.push(e)}deleteToDo(e){console.log(e),console.log(this.todos.includes(e)),this.todos.includes(e)&&this.todos.splice(this.todos.indexOf(e),1)}getToDo(e){for(let t=0;t<this.todos.length;t++)if(this.todos[t].title==e)return this.todos[t];return!1}updateToDo(e,t){e.title=t.title,e.description=t.description,e.priority=t.priority,e.dueDate=t.dueDate}};var c=class{constructor(){this.nextID=0,this.projects=[]}addProject(){var e=new a(this.nextID);return this.nextID+=1,this.projects.push(e),e}addSavedProject(e){this.projects.push(e)}removeProject(e){this.projects.includes(e)&&this.projects.splice(this.projects.indexOf(e),1)}getProjByID(e){let t=!1;return this.projects.forEach(o=>{o.ID==e&&(t=o)}),t}getIDByProj(e){return e.ID}addToDo(e,t){e.addToDo(t)}updateToDo(e,t,o){e.updateToDo(t,o)}};function s(e){localStorage.setItem("project-next-id",e.nextID);let t=[];if(null!=e.projects)for(let o=0;o<e.projects.length;o++){let r=e.projects[o],a=[];if(a.push(r.title),a.push(r.ID),null!=r.todos)for(let e=0;e<r.todos.length;e++){let t=r.todos[e],o=[];o.push(t.title),o.push(t.description),o.push(t.priority),o.push(t.dueDate),o.push(t.completed),a.push(o)}t.push(a)}localStorage.setItem("projects-array",JSON.stringify(t))}var i=class{constructor(e){this.projectManager=e,this.projectsDiv=document.querySelector("#projects")}addProjectView(e){let t=this.createProjectCard(e);t.append(this.createProjectNameInput(e)),t.append(this.createProjectTrashIcon(e,t)),t.append(this.createAddItemButton(e)),this.projectsDiv.append(t)}createProjectCard(e){let t=document.createElement("div");return t.classList.add("project-card"),t.setAttribute("data-proj",this.projectManager.getIDByProj(e)),t}createProjectNameInput(e){let t=document.createElement("input");return t.classList.add("project-name"),t.type="text",t.placeholder="Project name",t.addEventListener("input",(function(){e.title=this.value})),t}createProjectTrashIcon(e,t){let o=document.createElement("i");return o.classList.add("fas"),o.classList.add("fa-trash-alt"),o.addEventListener("click",()=>{this.projectManager.removeProject(e),this.projectsDiv.removeChild(t)}),o}createAddItemButton(e){let t=document.createElement("button");t.classList.add("add-new-item"),t.classList.add("form-elem"),t.textContent="+ Add new item";let o=this;return t.addEventListener("click",(function(){o.openToDoCreator(e)})),t}addTodoView(e,t){let o=this.projectManager.getIDByProj(e);document.querySelectorAll(".project-card").forEach(e=>{if(e.getAttribute("data-proj")==o){let o=e.lastChild,r=document.createElement("div");r.classList.add("todo-basic"),r.setAttribute("data-todo",t),this.addToDoLine(r,t),e.insertBefore(r,o)}})}openToDoCreator(e){let t=document.querySelector("#add-todo");t.style.display="block",t.setAttribute("data-proj",this.projectManager.getIDByProj(e)),document.querySelector("#background-cover").style.backgroundColor="rgba(0, 0, 0, .5)"}editToDo(e,t){console.log(e);let o=document.querySelector("#title"),r=document.querySelector("#date"),a=document.querySelector("#priority"),c=document.querySelector("#desc");document.querySelector("#form-title").textContent="Edit todo item",o.setAttribute("data-todo",e.title),o.value=e.title,r.value=e.dueDate,a.value=e.priority,c.value=e.description,this.openToDoCreator(t)}getPriority(e){switch(e){case 5:return"Highest";case 4:return"High";case 3:return"Medium";case 2:return"Low";case 1:return"Lowest";default:return"Medium"}}addToDoLine(e,t){let o=document.createElement("i");o.classList.add("far"),t.completed?o.classList.add("fa-check-circle"):o.classList.add("fa-circle"),o.addEventListener("click",e=>{let o=e.currentTarget,r=e.currentTarget.nextElementSibling;o.classList.contains("fa-circle")?(o.classList.remove("fa-circle"),o.classList.add("fa-check-circle"),r.classList.add("checked"),r.classList.remove("unchecked"),t.toggleComplete()):(o.classList.remove("fa-check-circle"),o.classList.add("fa-circle"),r.classList.add("unchecked"),r.classList.remove("checked"),t.toggleComplete())});let r=document.createElement("input");t.completed?r.classList.add("checked"):r.classList.add("unchecked"),r.classList.add("todo-title-input"),r.value=t.title;let a=document.createElement("p");a.classList.add("due-date"),a.textContent="Due date: "+t.dueDate;let c=document.createElement("p");c.classList.add("priority");let s=this.getPriority(parseInt(t.priority));c.textContent="Priority: "+s;this.projectManager;r.addEventListener("input",(function(e){let o=e.target;t.title=o.value}));let i=document.createElement("i");i.classList.add("far"),i.classList.add("fa-edit");let d=this;i.addEventListener("click",(function(e){d.editToDo(t,t.project)})),e.appendChild(o),e.appendChild(r),e.appendChild(a),e.appendChild(c),e.appendChild(i)}updateDisplay(){for(;this.projectsDiv.firstChild;)this.projectsDiv.removeChild(this.projectsDiv.firstChild);this.projectManager.projects.length>0&&this.projectManager.projects.forEach(e=>{this.addProjectView(e),e.todos.forEach(t=>{this.addTodoView(e,t)})}),s(this.projectManager)}};let d=function(){let e=new c;if(null!=localStorage.getItem("project-next-id")){e.nextID=parseInt(localStorage.getItem("project-next-id"));let t=JSON.parse(localStorage.getItem("project-array"));if(null!=t)for(let o=0;o<t.length;o++){let c=t[o],s=new a(c[1],c[0]);if(c.length>=3)for(let e=2;e<c.length;e++){let t=new r(s,c[e][0],c[e][1],c[e][3],c[e][4]);t.completed="true"==c[e][5],s.addToDo(t)}e.addSavedProject(s)}}return e}();console.log(d);const l=new i(d);l.updateDisplay(),document.querySelector("#new-project-button").addEventListener("click",()=>{console.log(d);let e=d.addProject();l.addProjectView(e),s(d)}),document.querySelector("#add-to-do-button").addEventListener("click",()=>{let e=document.querySelector("#add-todo"),t=d.getProjByID(parseInt(e.getAttribute("data-proj"))),o=document.querySelector("#title"),a=document.querySelector("#date"),c=document.querySelector("#priority"),s=document.querySelector("#desc"),i=null;if(o.hasAttribute("data-todo")){console.log(o.getAttribute("data-todo"));let e=t.getToDo(o.getAttribute("data-todo"));console.log(e),i=new r(t,o.value,s.value,c.value,a.value?a.value:"None"),d.updateToDo(t,e,i),l.updateDisplay()}else i=new r(t,o.value,s.value,c.value,a.value?a.value:"None"),d.addToDo(t,i),l.updateDisplay();e.style.display="none",o.value="",a.value="",c.value="",s.value="",o.hasAttribute("data-todo")&&o.removeAttribute("data-todo"),document.querySelector("#background-cover").style.backgroundColor="rgba(0, 0, 0, 0)",document.querySelector("#form-title").textContent="Add a todo item",console.log(localStorage)})}]);